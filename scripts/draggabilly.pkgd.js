/*!
 * Draggabilly PACKAGED v2.1.0
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 * MIT license
 */(function(a,b){typeof define=='function'&&define.amd?define('jquery-bridget/jquery-bridget',['jquery'],function(c){b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('jquery')):a.jQueryBridget=b(a,a.jQuery)})(window,function(a,b){var g=Array.prototype.slice,c=a.console,d=typeof c=='undefined'?function(){}:function(a){c.error(a)};function e(e,h,c){if(c=c||b||a.jQuery,!c)return;h.prototype.option||(h.prototype.option=function(a){if(!c.isPlainObject(a))return;this.options=c.extend(!0,this.options,a)}),c.fn[e]=function(a){if(typeof a=='string'){var b=g.call(arguments,1);return i(this,a,b)}return j(this,a),this};function i(f,b,h){var g='$().'+e+'("'+b+'")',a;return f.each(function(l,k){var f=c.data(k,e),i,j;if(!f){d(e+' not initialized. Cannot call methods, i.e. '+g);return}if(i=f[b],!i||b.charAt(0)=='_'){d(g+' is not a valid method');return}j=i.apply(f,h),a=a===void 0?j:a}),a!==void 0?a:f}function j(b,a){b.each(function(f,d){var b=c.data(d,e);b?(b.option(a),b._init()):(b=new h(d,a),c.data(d,e,b))})}f(c)}function f(a){if(!a||a&&a.bridget)return;a.bridget=e}return f(b||a.jQuery),e}),function(b,a){typeof define=='function'&&define.amd?define('get-size/get-size',[],function(){return a()}):typeof module=='object'&&module.exports?module.exports=a():b.getSize=a()}(window,function(){var e,a,b,c,f;function d(a){var b=parseFloat(a),c=a.indexOf('%')==-1&&!isNaN(b);return c&&b}function i(){}e=typeof console=='undefined'?i:function(a){console.error(a)},a=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'],b=a.length;function j(){for(var d={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},c=0,e;c<b;c++)e=a[c],d[e]=0;return d}function g(b){var a=getComputedStyle(b);return a||e('Style returned '+a+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1'),a}c=!1;function k(){var a,b,e;if(c)return;c=!0,a=document.createElement('div'),a.style.width='200px',a.style.padding='1px 2px 3px 4px',a.style.borderStyle='solid',a.style.borderWidth='1px 2px 3px 4px',a.style.boxSizing='border-box',b=document.body||document.documentElement,b.appendChild(a),e=g(a),h.isBoxSizeOuter=f=d(e.width)==200,b.removeChild(a)}function h(e){var h,c,x,i,n,w,p,s,q,v,u,l,r,o,m,t;if(k(),typeof e=='string'&&(e=document.querySelector(e)),!e||typeof e!='object'||!e.nodeType)return;if(h=g(e),h.display=='none')return j();c={},c.width=e.offsetWidth,c.height=e.offsetHeight,x=c.isBorderBox=h.boxSizing=='border-box';for(i=0;i<b;i++)n=a[i],w=h[n],p=parseFloat(w),c[n]=isNaN(p)?0:p;return s=c.paddingLeft+c.paddingRight,q=c.paddingTop+c.paddingBottom,v=c.marginLeft+c.marginRight,u=c.marginTop+c.marginBottom,l=c.borderLeftWidth+c.borderRightWidth,r=c.borderTopWidth+c.borderBottomWidth,o=x&&f,m=d(h.width),m!==!1&&(c.width=m+(o?0:s+l)),t=d(h.height),t!==!1&&(c.height=t+(o?0:q+r)),c.innerWidth=c.width-(s+l),c.innerHeight=c.height-(q+r),c.outerWidth=c.width+v,c.outerHeight=c.height+u,c}return h}),function(b,a){typeof define=='function'&&define.amd?define('ev-emitter/ev-emitter',a):typeof module=='object'&&module.exports?module.exports=a():b.EvEmitter=a()}(this,function(){function b(){}var a=b.prototype;return a.on=function(a,b){var c,d;if(!a||!b)return;return c=this._events=this._events||{},d=c[a]=c[a]||[],d.indexOf(b)==-1&&d.push(b),this},a.once=function(a,b){var c,d;if(!a||!b)return;return this.on(a,b),c=this._onceEvents=this._onceEvents||{},d=c[a]=c[a]||[],d[b]=!0,this},a.off=function(c,d){var a=this._events&&this._events[c],b;if(!a||!a.length)return;return b=a.indexOf(d),b!=-1&&a.splice(b,1),this},a.emitEvent=function(e,f){var b=this._events&&this._events[e],c,a,d,g;if(!b||!b.length)return;for(c=0,a=b[c],f=f||[],d=this._onceEvents&&this._onceEvents[e];a;)g=d&&d[a],g&&(this.off(e,a),delete d[a]),a.apply(this,f),c+=g?0:1,a=b[c];return this},b}),function(a,b){typeof define=='function'&&define.amd?define('unipointer/unipointer',['ev-emitter/ev-emitter'],function(c){return b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('ev-emitter')):a.Unipointer=b(a,a.EvEmitter)}(window,function(b,e){var a,d;function f(){}function c(){}return a=c.prototype=Object.create(e.prototype),a.bindStartEvent=function(a){this._bindStartEvent(a,!0)},a.unbindStartEvent=function(a){this._bindStartEvent(a,!1)},a._bindStartEvent=function(a,c){c=c===void 0||!!c;var d=c?'addEventListener':'removeEventListener';b.navigator.pointerEnabled?a[d]('pointerdown',this):b.navigator.msPointerEnabled?a[d]('MSPointerDown',this):(a[d]('mousedown',this),a[d]('touchstart',this))},a.handleEvent=function(a){var b='on'+a.type;this[b]&&this[b](a)},a.getTouch=function(c){for(var a=0,b;a<c.length;a++)if(b=c[a],b.identifier==this.pointerIdentifier)return b},a.onmousedown=function(a){var b=a.button;if(b&&b!==0&&b!==1)return;this._pointerDown(a,a)},a.ontouchstart=function(a){this._pointerDown(a,a.changedTouches[0])},a.onMSPointerDown=a.onpointerdown=function(a){this._pointerDown(a,a)},a._pointerDown=function(b,a){if(this.isPointerDown)return;this.isPointerDown=!0,this.pointerIdentifier=a.pointerId!==void 0?a.pointerId:a.identifier,this.pointerDown(b,a)},a.pointerDown=function(a,b){this._bindPostStartEvents(a),this.emitEvent('pointerDown',[a,b])},d={mousedown:['mousemove','mouseup'],touchstart:['touchmove','touchend','touchcancel'],pointerdown:['pointermove','pointerup','pointercancel'],MSPointerDown:['MSPointerMove','MSPointerUp','MSPointerCancel']},a._bindPostStartEvents=function(a){if(!a)return;var c=d[a.type];c.forEach(function(a){b.addEventListener(a,this)},this),this._boundPointerEvents=c},a._unbindPostStartEvents=function(){if(!this._boundPointerEvents)return;this._boundPointerEvents.forEach(function(a){b.removeEventListener(a,this)},this),delete this._boundPointerEvents},a.onmousemove=function(a){this._pointerMove(a,a)},a.onMSPointerMove=a.onpointermove=function(a){a.pointerId==this.pointerIdentifier&&this._pointerMove(a,a)},a.ontouchmove=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerMove(a,b)},a._pointerMove=function(a,b){this.pointerMove(a,b)},a.pointerMove=function(a,b){this.emitEvent('pointerMove',[a,b])},a.onmouseup=function(a){this._pointerUp(a,a)},a.onMSPointerUp=a.onpointerup=function(a){a.pointerId==this.pointerIdentifier&&this._pointerUp(a,a)},a.ontouchend=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerUp(a,b)},a._pointerUp=function(a,b){this._pointerDone(),this.pointerUp(a,b)},a.pointerUp=function(a,b){this.emitEvent('pointerUp',[a,b])},a._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},a.pointerDone=f,a.onMSPointerCancel=a.onpointercancel=function(a){a.pointerId==this.pointerIdentifier&&this._pointerCancel(a,a)},a.ontouchcancel=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerCancel(a,b)},a._pointerCancel=function(a,b){this._pointerDone(),this.pointerCancel(a,b)},a.pointerCancel=function(a,b){this.emitEvent('pointerCancel',[a,b])},c.getPointerPoint=function(a){return{x:a.pageX,y:a.pageY}},c}),function(a,b){typeof define=='function'&&define.amd?define('unidragger/unidragger',['unipointer/unipointer'],function(c){return b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('unipointer')):a.Unidragger=b(a,a.Unipointer)}(window,function(e,b){var a,c;function f(){}function d(){}return a=d.prototype=Object.create(b.prototype),a.bindHandles=function(){this._bindHandles(!0)},a.unbindHandles=function(){this._bindHandles(!1)},c=e.navigator,a._bindHandles=function(a){var b,g,d,e;a=a===void 0||!!a,c.pointerEnabled?b=function(b){b.style.touchAction=a?'none':''}:c.msPointerEnabled?b=function(b){b.style.msTouchAction=a?'none':''}:b=f,g=a?'addEventListener':'removeEventListener';for(d=0;d<this.handles.length;d++)e=this.handles[d],this._bindStartEvent(e,a),b(e),e[g]('click',this)},a.pointerDown=function(a,c){if(a.target.nodeName=='INPUT'&&a.target.type=='range'){this.isPointerDown=!1,delete this.pointerIdentifier;return}this._dragPointerDown(a,c);var b=document.activeElement;b&&b.blur&&b.blur(),this._bindPostStartEvents(a),this.emitEvent('pointerDown',[a,c])},a._dragPointerDown=function(a,c){this.pointerDownPoint=b.getPointerPoint(c);var d=this.canPreventDefaultOnPointerDown(a,c);d&&a.preventDefault()},a.canPreventDefaultOnPointerDown=function(a){return a.target.nodeName!='SELECT'},a.pointerMove=function(a,b){var c=this._dragPointerMove(a,b);this.emitEvent('pointerMove',[a,b,c]),this._dragMove(a,b,c)},a._dragPointerMove=function(e,a){var c=b.getPointerPoint(a),d={x:c.x-this.pointerDownPoint.x,y:c.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(d)&&this._dragStart(e,a),d},a.hasDragStarted=function(a){return Math.abs(a.x)>3||Math.abs(a.y)>3},a.pointerUp=function(a,b){this.emitEvent('pointerUp',[a,b]),this._dragPointerUp(a,b)},a._dragPointerUp=function(a,b){this.isDragging?this._dragEnd(a,b):this._staticClick(a,b)},a._dragStart=function(c,a){this.isDragging=!0,this.dragStartPoint=b.getPointerPoint(a),this.isPreventingClicks=!0,this.dragStart(c,a)},a.dragStart=function(a,b){this.emitEvent('dragStart',[a,b])},a._dragMove=function(a,b,c){if(!this.isDragging)return;this.dragMove(a,b,c)},a.dragMove=function(a,b,c){a.preventDefault(),this.emitEvent('dragMove',[a,b,c])},a._dragEnd=function(a,b){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(a,b)},a.dragEnd=function(a,b){this.emitEvent('dragEnd',[a,b])},a.onclick=function(a){this.isPreventingClicks&&a.preventDefault()},a._staticClick=function(a,c){if(this.isIgnoringMouseUp&&a.type=='mouseup')return;var b=a.target.nodeName;(b=='INPUT'||b=='TEXTAREA')&&a.target.focus(),this.staticClick(a,c),a.type!='mouseup'&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))},a.staticClick=function(a,b){this.emitEvent('staticClick',[a,b])},d.getPointerPoint=b.getPointerPoint,d}),function(a,b){typeof define=='function'&&define.amd?define(['get-size/get-size','unidragger/unidragger'],function(c,d){return b(a,c,d)}):typeof module=='object'&&module.exports?module.exports=b(a,require('get-size'),require('unidragger')):a.Draggabilly=b(a,a.getSize,a.Unidragger)}(window,function(e,k,m){var f=e.document,g,i,l,b,d,a;function n(){}function j(a,b){for(var c in b)a[c]=b[c];return a}function o(a){return a instanceof HTMLElement}g=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,i=0,g||(g=function(c){var a=(new Date).getTime(),b=Math.max(0,16-(a-i)),d=setTimeout(c,b);return i=a+b,d}),l=f.documentElement,b=typeof l.style.transform=='string'?'transform':'WebkitTransform',d=e.jQuery;function c(a,b){this.element=typeof a=='string'?f.querySelector(a):a,d&&(this.$element=d(this.element)),this.options=j({},this.constructor.defaults),this.option(b),this._create()}a=c.prototype=Object.create(m.prototype),c.defaults={},a.option=function(a){j(this.options,a)},a._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=j({},this.position);var a=getComputedStyle(this.element);a.position!='relative'&&a.position!='absolute'&&(this.element.style.position='relative'),this.enable(),this.setHandles()},a.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},a.dispatchEvent=function(a,b,c){var g=[b].concat(c),d,f;this.emitEvent(a,g),d=e.jQuery,d&&this.$element&&(b?(f=d.Event(b),f.type=a,this.$element.trigger(f,c)):this.$element.trigger(a,c))},c.prototype._getPosition=function(){var a=getComputedStyle(this.element),b=this._getPositionCoord(a.left,'width'),c=this._getPositionCoord(a.top,'height');this.position.x=isNaN(b)?0:b,this.position.y=isNaN(c)?0:c,this._addTransformPosition(a)},c.prototype._getPositionCoord=function(a,b){if(a.indexOf('%')!=-1){var c=k(this.element.parentNode);return parseFloat(a)/100*c[b]}return parseInt(a,10)},a._addTransformPosition=function(g){var a=g[b],c,d,e,f;if(a.indexOf('matrix')!==0)return;c=a.split(','),d=a.indexOf('matrix3d')===0?12:4,e=parseInt(c[d],10),f=parseInt(c[d+1],10),this.position.x+=e,this.position.y+=f},a.pointerDown=function(b,c){this._dragPointerDown(b,c);var a=f.activeElement;a&&a.blur&&a!=f.body&&a.blur(),this._bindPostStartEvents(b),this.element.classList.add('is-pointer-down'),this.dispatchEvent('pointerDown',b,[c])},a.pointerMove=function(a,b){var c=this._dragPointerMove(a,b);this.dispatchEvent('pointerMove',a,[b,c]),this._dragMove(a,b,c)},a.dragStart=function(a,b){if(!this.isEnabled)return;this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add('is-dragging'),this.dispatchEvent('dragStart',a,[b]),this.animate()},a.measureContainment=function(){var b=this.options.containment,c,d,a,e,g,i,j,h;if(!b)return;c=o(b)?b:typeof b=='string'?f.querySelector(b):this.element.parentNode,d=k(this.element),a=k(c),e=this.element.getBoundingClientRect(),g=c.getBoundingClientRect(),i=a.borderLeftWidth+a.borderRightWidth,j=a.borderTopWidth+a.borderBottomWidth,h=this.relativeStartPosition={x:e.left-(g.left+a.borderLeftWidth),y:e.top-(g.top+a.borderTopWidth)},this.containSize={width:a.width-i-h.x-d.width,height:a.height-j-h.y-d.height}},a.dragMove=function(g,i,f){var a,b,c,d,e;if(!this.isEnabled)return;a=f.x,b=f.y,c=this.options.grid,d=c&&c[0],e=c&&c[1],a=h(a,d),b=h(b,e),a=this.containDrag('x',a,d),b=this.containDrag('y',b,e),a=this.options.axis=='y'?0:a,b=this.options.axis=='x'?0:b,this.position.x=this.startPosition.x+a,this.position.y=this.startPosition.y+b,this.dragPoint.x=a,this.dragPoint.y=b,this.dispatchEvent('dragMove',g,[i,f])};function h(c,a,b){return b=b||'round',a?Math[b](c/a)*a:c}return a.containDrag=function(g,b,c){var d,e,f,a;return this.options.containment?(d=g=='x'?'width':'height',e=this.relativeStartPosition[g],f=h(-e,c,'ceil'),a=this.containSize[d],a=h(a,c,'floor'),Math.min(a,Math.max(f,b))):b},a.pointerUp=function(a,b){this.element.classList.remove('is-pointer-down'),this.dispatchEvent('pointerUp',a,[b]),this._dragPointerUp(a,b)},a.dragEnd=function(a,c){if(!this.isEnabled)return;b&&(this.element.style[b]='',this.setLeftTop()),this.element.classList.remove('is-dragging'),this.dispatchEvent('dragEnd',a,[c])},a.animate=function(){if(!this.isDragging)return;this.positionDrag();var a=this;g(function(){a.animate()})},a.setLeftTop=function(){this.element.style.left=this.position.x+'px',this.element.style.top=this.position.y+'px'},a.positionDrag=function(){this.element.style[b]='translate3d( '+this.dragPoint.x+'px, '+this.dragPoint.y+'px, 0)'},a.staticClick=function(a,b){this.dispatchEvent('staticClick',a,[b])},a.enable=function(){this.isEnabled=!0},a.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},a.destroy=function(){this.disable(),this.element.style[b]='',this.element.style.left='',this.element.style.top='',this.element.style.position='',this.unbindHandles(),this.$element&&this.$element.removeData('draggabilly')},a._init=n,d&&d.bridget&&d.bridget('draggabilly',c),c})