/*!
 * Draggabilly PACKAGED v2.1.0
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 * MIT license
 */(function(a,b){typeof define=='function'&&define.amd?define('jquery-bridget/jquery-bridget',['jquery'],function(c){b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('jquery')):a.jQueryBridget=b(a,a.jQuery)})(window,function(a,c){var g=Array.prototype.slice,d=a.console,e=typeof d=='undefined'?function(){}:function(a){d.error(a)};function b(d,h,b){if(b=b||c||a.jQuery,!b)return;h.prototype.option||(h.prototype.option=function(a){if(!b.isPlainObject(a))return;this.options=b.extend(!0,this.options,a)}),b.fn[d]=function(a){if(typeof a=='string'){var b=g.call(arguments,1);return i(this,a,b)}return j(this,a),this};function i(f,c,h){var g='$().'+d+'("'+c+'")',a;return f.each(function(l,j){var f=b.data(j,d),i,k;if(!f){e(d+' not initialized. Cannot call methods, i.e. '+g);return}if(i=f[c],!i||c.charAt(0)=='_'){e(g+' is not a valid method');return}k=i.apply(f,h),a=a===void 0?k:a}),a!==void 0?a:f}function j(c,a){c.each(function(f,e){var c=b.data(e,d);c?(c.option(a),c._init()):(c=new h(e,a),b.data(e,d,c))})}f(b)}function f(a){if(!a||a&&a.bridget)return;a.bridget=b}return f(c||a.jQuery),b}),function(b,a){typeof define=='function'&&define.amd?define('get-size/get-size',[],function(){return a()}):typeof module=='object'&&module.exports?module.exports=a():b.getSize=a()}(window,function(){var g,a,e,c,d;function b(a){var b=parseFloat(a),c=a.indexOf('%')==-1&&!isNaN(b);return c&&b}function j(){}g=typeof console=='undefined'?j:function(a){console.error(a)},a=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'],e=a.length;function i(){for(var c={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,d;b<e;b++)d=a[b],c[d]=0;return c}function f(b){var a=getComputedStyle(b);return a||g('Style returned '+a+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1'),a}c=!1;function k(){var a,e,g;if(c)return;c=!0,a=document.createElement('div'),a.style.width='200px',a.style.padding='1px 2px 3px 4px',a.style.borderStyle='solid',a.style.borderWidth='1px 2px 3px 4px',a.style.boxSizing='border-box',e=document.body||document.documentElement,e.appendChild(a),g=f(a),h.isBoxSizeOuter=d=b(g.width)==200,e.removeChild(a)}function h(g){var h,c,x,j,n,w,p,s,q,v,u,l,r,o,m,t;if(k(),typeof g=='string'&&(g=document.querySelector(g)),!g||typeof g!='object'||!g.nodeType)return;if(h=f(g),h.display=='none')return i();c={},c.width=g.offsetWidth,c.height=g.offsetHeight,x=c.isBorderBox=h.boxSizing=='border-box';for(j=0;j<e;j++)n=a[j],w=h[n],p=parseFloat(w),c[n]=isNaN(p)?0:p;return s=c.paddingLeft+c.paddingRight,q=c.paddingTop+c.paddingBottom,v=c.marginLeft+c.marginRight,u=c.marginTop+c.marginBottom,l=c.borderLeftWidth+c.borderRightWidth,r=c.borderTopWidth+c.borderBottomWidth,o=x&&d,m=b(h.width),m!==!1&&(c.width=m+(o?0:s+l)),t=b(h.height),t!==!1&&(c.height=t+(o?0:q+r)),c.innerWidth=c.width-(s+l),c.innerHeight=c.height-(q+r),c.outerWidth=c.width+v,c.outerHeight=c.height+u,c}return h}),function(b,a){typeof define=='function'&&define.amd?define('ev-emitter/ev-emitter',a):typeof module=='object'&&module.exports?module.exports=a():b.EvEmitter=a()}(this,function(){function b(){}var a=b.prototype;return a.on=function(a,b){var c,d;if(!a||!b)return;return c=this._events=this._events||{},d=c[a]=c[a]||[],d.indexOf(b)==-1&&d.push(b),this},a.once=function(a,b){var c,d;if(!a||!b)return;return this.on(a,b),c=this._onceEvents=this._onceEvents||{},d=c[a]=c[a]||[],d[b]=!0,this},a.off=function(c,d){var a=this._events&&this._events[c],b;if(!a||!a.length)return;return b=a.indexOf(d),b!=-1&&a.splice(b,1),this},a.emitEvent=function(c,d){var b=this._events&&this._events[c],e,a,f,g;if(!b||!b.length)return;for(e=0,a=b[e],d=d||[],f=this._onceEvents&&this._onceEvents[c];a;)g=f&&f[a],g&&(this.off(c,a),delete f[a]),a.apply(this,d),e+=g?0:1,a=b[e];return this},b}),function(a,b){typeof define=='function'&&define.amd?define('unipointer/unipointer',['ev-emitter/ev-emitter'],function(c){return b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('ev-emitter')):a.Unipointer=b(a,a.EvEmitter)}(window,function(b,e){var a,d;function f(){}function c(){}return a=c.prototype=Object.create(e.prototype),a.bindStartEvent=function(a){this._bindStartEvent(a,!0)},a.unbindStartEvent=function(a){this._bindStartEvent(a,!1)},a._bindStartEvent=function(a,c){c=c===void 0||!!c;var d=c?'addEventListener':'removeEventListener';b.navigator.pointerEnabled?a[d]('pointerdown',this):b.navigator.msPointerEnabled?a[d]('MSPointerDown',this):(a[d]('mousedown',this),a[d]('touchstart',this))},a.handleEvent=function(a){var b='on'+a.type;this[b]&&this[b](a)},a.getTouch=function(b){for(var a=0,c;a<b.length;a++)if(c=b[a],c.identifier==this.pointerIdentifier)return c},a.onmousedown=function(a){var b=a.button;if(b&&b!==0&&b!==1)return;this._pointerDown(a,a)},a.ontouchstart=function(a){this._pointerDown(a,a.changedTouches[0])},a.onMSPointerDown=a.onpointerdown=function(a){this._pointerDown(a,a)},a._pointerDown=function(b,a){if(this.isPointerDown)return;this.isPointerDown=!0,this.pointerIdentifier=a.pointerId!==void 0?a.pointerId:a.identifier,this.pointerDown(b,a)},a.pointerDown=function(a,b){this._bindPostStartEvents(a),this.emitEvent('pointerDown',[a,b])},d={mousedown:['mousemove','mouseup'],touchstart:['touchmove','touchend','touchcancel'],pointerdown:['pointermove','pointerup','pointercancel'],MSPointerDown:['MSPointerMove','MSPointerUp','MSPointerCancel']},a._bindPostStartEvents=function(a){if(!a)return;var c=d[a.type];c.forEach(function(a){b.addEventListener(a,this)},this),this._boundPointerEvents=c},a._unbindPostStartEvents=function(){if(!this._boundPointerEvents)return;this._boundPointerEvents.forEach(function(a){b.removeEventListener(a,this)},this),delete this._boundPointerEvents},a.onmousemove=function(a){this._pointerMove(a,a)},a.onMSPointerMove=a.onpointermove=function(a){a.pointerId==this.pointerIdentifier&&this._pointerMove(a,a)},a.ontouchmove=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerMove(a,b)},a._pointerMove=function(a,b){this.pointerMove(a,b)},a.pointerMove=function(a,b){this.emitEvent('pointerMove',[a,b])},a.onmouseup=function(a){this._pointerUp(a,a)},a.onMSPointerUp=a.onpointerup=function(a){a.pointerId==this.pointerIdentifier&&this._pointerUp(a,a)},a.ontouchend=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerUp(a,b)},a._pointerUp=function(a,b){this._pointerDone(),this.pointerUp(a,b)},a.pointerUp=function(a,b){this.emitEvent('pointerUp',[a,b])},a._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},a.pointerDone=f,a.onMSPointerCancel=a.onpointercancel=function(a){a.pointerId==this.pointerIdentifier&&this._pointerCancel(a,a)},a.ontouchcancel=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerCancel(a,b)},a._pointerCancel=function(a,b){this._pointerDone(),this.pointerCancel(a,b)},a.pointerCancel=function(a,b){this.emitEvent('pointerCancel',[a,b])},c.getPointerPoint=function(a){return{x:a.pageX,y:a.pageY}},c}),function(a,b){typeof define=='function'&&define.amd?define('unidragger/unidragger',['unipointer/unipointer'],function(c){return b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('unipointer')):a.Unidragger=b(a,a.Unipointer)}(window,function(e,b){var a,c;function f(){}function d(){}return a=d.prototype=Object.create(b.prototype),a.bindHandles=function(){this._bindHandles(!0)},a.unbindHandles=function(){this._bindHandles(!1)},c=e.navigator,a._bindHandles=function(a){var b,g,d,e;a=a===void 0||!!a,c.pointerEnabled?b=function(b){b.style.touchAction=a?'none':''}:c.msPointerEnabled?b=function(b){b.style.msTouchAction=a?'none':''}:b=f,g=a?'addEventListener':'removeEventListener';for(d=0;d<this.handles.length;d++)e=this.handles[d],this._bindStartEvent(e,a),b(e),e[g]('click',this)},a.pointerDown=function(a,c){if(a.target.nodeName=='INPUT'&&a.target.type=='range'){this.isPointerDown=!1,delete this.pointerIdentifier;return}this._dragPointerDown(a,c);var b=document.activeElement;b&&b.blur&&b.blur(),this._bindPostStartEvents(a),this.emitEvent('pointerDown',[a,c])},a._dragPointerDown=function(a,c){this.pointerDownPoint=b.getPointerPoint(c);var d=this.canPreventDefaultOnPointerDown(a,c);d&&a.preventDefault()},a.canPreventDefaultOnPointerDown=function(a){return a.target.nodeName!='SELECT'},a.pointerMove=function(a,b){var c=this._dragPointerMove(a,b);this.emitEvent('pointerMove',[a,b,c]),this._dragMove(a,b,c)},a._dragPointerMove=function(e,a){var c=b.getPointerPoint(a),d={x:c.x-this.pointerDownPoint.x,y:c.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(d)&&this._dragStart(e,a),d},a.hasDragStarted=function(a){return Math.abs(a.x)>3||Math.abs(a.y)>3},a.pointerUp=function(a,b){this.emitEvent('pointerUp',[a,b]),this._dragPointerUp(a,b)},a._dragPointerUp=function(a,b){this.isDragging?this._dragEnd(a,b):this._staticClick(a,b)},a._dragStart=function(c,a){this.isDragging=!0,this.dragStartPoint=b.getPointerPoint(a),this.isPreventingClicks=!0,this.dragStart(c,a)},a.dragStart=function(a,b){this.emitEvent('dragStart',[a,b])},a._dragMove=function(a,b,c){if(!this.isDragging)return;this.dragMove(a,b,c)},a.dragMove=function(a,b,c){a.preventDefault(),this.emitEvent('dragMove',[a,b,c])},a._dragEnd=function(a,b){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(a,b)},a.dragEnd=function(a,b){this.emitEvent('dragEnd',[a,b])},a.onclick=function(a){this.isPreventingClicks&&a.preventDefault()},a._staticClick=function(a,c){if(this.isIgnoringMouseUp&&a.type=='mouseup')return;var b=a.target.nodeName;(b=='INPUT'||b=='TEXTAREA')&&a.target.focus(),this.staticClick(a,c),a.type!='mouseup'&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))},a.staticClick=function(a,b){this.emitEvent('staticClick',[a,b])},d.getPointerPoint=b.getPointerPoint,d}),function(a,b){typeof define=='function'&&define.amd?define(['get-size/get-size','unidragger/unidragger'],function(c,d){return b(a,c,d)}):typeof module=='object'&&module.exports?module.exports=b(a,require('get-size'),require('unidragger')):a.Draggabilly=b(a,a.getSize,a.Unidragger)}(window,function(b,i,o){var e=b.document,j,k,l,d,f,a;function n(){}function h(a,b){for(var c in b)a[c]=b[c];return a}function m(a){return a instanceof HTMLElement}j=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,k=0,j||(j=function(c){var a=(new Date).getTime(),b=Math.max(0,16-(a-k)),d=setTimeout(c,b);return k=a+b,d}),l=e.documentElement,d=typeof l.style.transform=='string'?'transform':'WebkitTransform',f=b.jQuery;function c(a,b){this.element=typeof a=='string'?e.querySelector(a):a,f&&(this.$element=f(this.element)),this.options=h({},this.constructor.defaults),this.option(b),this._create()}a=c.prototype=Object.create(o.prototype),c.defaults={},a.option=function(a){h(this.options,a)},a._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=h({},this.position);var a=getComputedStyle(this.element);a.position!='relative'&&a.position!='absolute'&&(this.element.style.position='relative'),this.enable(),this.setHandles()},a.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},a.dispatchEvent=function(a,c,d){var g=[c].concat(d),e,f;this.emitEvent(a,g),e=b.jQuery,e&&this.$element&&(c?(f=e.Event(c),f.type=a,this.$element.trigger(f,d)):this.$element.trigger(a,d))},c.prototype._getPosition=function(){var a=getComputedStyle(this.element),b=this._getPositionCoord(a.left,'width'),c=this._getPositionCoord(a.top,'height');this.position.x=isNaN(b)?0:b,this.position.y=isNaN(c)?0:c,this._addTransformPosition(a)},c.prototype._getPositionCoord=function(a,b){if(a.indexOf('%')!=-1){var c=i(this.element.parentNode);return parseFloat(a)/100*c[b]}return parseInt(a,10)},a._addTransformPosition=function(e){var a=e[d],b,c,f,g;if(a.indexOf('matrix')!==0)return;b=a.split(','),c=a.indexOf('matrix3d')===0?12:4,f=parseInt(b[c],10),g=parseInt(b[c+1],10),this.position.x+=f,this.position.y+=g},a.pointerDown=function(b,c){this._dragPointerDown(b,c);var a=e.activeElement;a&&a.blur&&a!=e.body&&a.blur(),this._bindPostStartEvents(b),this.element.classList.add('is-pointer-down'),this.dispatchEvent('pointerDown',b,[c])},a.pointerMove=function(a,b){var c=this._dragPointerMove(a,b);this.dispatchEvent('pointerMove',a,[b,c]),this._dragMove(a,b,c)},a.dragStart=function(a,b){if(!this.isEnabled)return;this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add('is-dragging'),this.dispatchEvent('dragStart',a,[b]),this.animate()},a.measureContainment=function(){var b=this.options.containment,c,d,a,f,g,j,k,h;if(!b)return;c=m(b)?b:typeof b=='string'?e.querySelector(b):this.element.parentNode,d=i(this.element),a=i(c),f=this.element.getBoundingClientRect(),g=c.getBoundingClientRect(),j=a.borderLeftWidth+a.borderRightWidth,k=a.borderTopWidth+a.borderBottomWidth,h=this.relativeStartPosition={x:f.left-(g.left+a.borderLeftWidth),y:f.top-(g.top+a.borderTopWidth)},this.containSize={width:a.width-j-h.x-d.width,height:a.height-k-h.y-d.height}},a.dragMove=function(h,i,f){var a,b,c,d,e;if(!this.isEnabled)return;a=f.x,b=f.y,c=this.options.grid,d=c&&c[0],e=c&&c[1],a=g(a,d),b=g(b,e),a=this.containDrag('x',a,d),b=this.containDrag('y',b,e),a=this.options.axis=='y'?0:a,b=this.options.axis=='x'?0:b,this.position.x=this.startPosition.x+a,this.position.y=this.startPosition.y+b,this.dragPoint.x=a,this.dragPoint.y=b,this.dispatchEvent('dragMove',h,[i,f])};function g(c,a,b){return b=b||'round',a?Math[b](c/a)*a:c}return a.containDrag=function(h,b,c){var d,e,f,a;return this.options.containment?(d=h=='x'?'width':'height',e=this.relativeStartPosition[h],f=g(-e,c,'ceil'),a=this.containSize[d],a=g(a,c,'floor'),Math.min(a,Math.max(f,b))):b},a.pointerUp=function(a,b){this.element.classList.remove('is-pointer-down'),this.dispatchEvent('pointerUp',a,[b]),this._dragPointerUp(a,b)},a.dragEnd=function(a,b){if(!this.isEnabled)return;d&&(this.element.style[d]='',this.setLeftTop()),this.element.classList.remove('is-dragging'),this.dispatchEvent('dragEnd',a,[b])},a.animate=function(){if(!this.isDragging)return;this.positionDrag();var a=this;j(function(){a.animate()})},a.setLeftTop=function(){this.element.style.left=this.position.x+'px',this.element.style.top=this.position.y+'px'},a.positionDrag=function(){this.element.style[d]='translate3d( '+this.dragPoint.x+'px, '+this.dragPoint.y+'px, 0)'},a.staticClick=function(a,b){this.dispatchEvent('staticClick',a,[b])},a.enable=function(){this.isEnabled=!0},a.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},a.destroy=function(){this.disable(),this.element.style[d]='',this.element.style.left='',this.element.style.top='',this.element.style.position='',this.unbindHandles(),this.$element&&this.$element.removeData('draggabilly')},a._init=n,f&&f.bridget&&f.bridget('draggabilly',c),c})